!function(e){e.fn.waitMe=function(t){return this.each(function(){var i,o,a,r,s,n,c=e(this),d="waitMe",f=!1,l="background-color",u="",m="",w={init:function(){switch(s=e.extend({effect:"rotation",text:"Please Wait...",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",waitTime:-1,textPos:"vertical",fontSize:"",source:"",onClose:function(){}},t),n=(new Date).getMilliseconds(),r=e('<div class="'+d+'" data-waitme_id="'+n+'"></div>'),s.effect){case"none":a=0;break;case"bounce":a=3;break;case"rotateplane":a=1;break;case"stretch":a=5;break;case"orbit":a=2,f=!0;break;case"roundBounce":a=12;break;case"win8":case"win8_linear":a=5,f=!0;break;case"ios":a=12;break;case"facebook":a=3;break;case"rotation":a=1,l="border-color";break;case"timer":if(a=2,e.isArray(s.color))var w=s.color[0];else w=s.color;u="border-color:"+w;break;case"pulse":a=1,l="border-color";break;case"progressBar":a=1;break;case"bouncePulse":a=3;break;case"img":a=1}if(""!==u&&(u+=";"),a>0){if("img"===s.effect)m='<img src="'+s.source+'">';else for(var h=1;h<=a;++h){if(e.isArray(s.color))null==(w=s.color[h])&&(w="#000");else w=s.color;m+=f?'<div class="'+d+"_progress_elem"+h+'"><div style="'+l+":"+w+'"></div></div>':'<div class="'+d+"_progress_elem"+h+'" style="'+l+":"+w+'"></div>'}o=e('<div class="'+d+"_progress "+s.effect+'" style="'+u+'">'+m+"</div>")}if(s.text){if(e.isArray(s.color))w=s.color[0];else w=s.color;if(""!=s.fontSize)var v="font-size:"+s.fontSize;else v="";i=e('<div class="'+d+'_text" style="color:'+w+";"+v+'">'+s.text+"</div>")}var g=c.find("> ."+d);g&&g.remove();var p=e('<div class="'+d+"_content "+s.textPos+'"></div>');p.append(o,i),r.append(p),"HTML"==c[0].tagName&&(c=e("body")),c.addClass(d+"_container").attr("data-waitme_id",n).append(r),g=c.find("> ."+d);var x=c.find("."+d+"_content");if(g.css({background:s.bg}),""!==s.maxSize&&"none"!=s.effect){var y=o.outerHeight(),_=(o.outerWidth(),y);if("img"===s.effect)o.css({height:s.maxSize+"px"}),o.find(">img").css({maxHeight:"100%"}),x.css({marginTop:-x.outerHeight()/2+"px"});else if(s.maxSize<_)if("stretch"==s.effect)o.css({height:s.maxSize+"px",width:s.maxSize+"px"}),o.find("> div").css({margin:"0 5%"});else{var k=s.maxSize/_-.2,M="-50%";"roundBounce"==s.effect?(M="-75%",s.text&&(M="75%")):"win8"==s.effect||"timer"==s.effect||"orbit"==s.effect?(M="-20%",s.text&&(M="20%")):"ios"==s.effect&&(M="-15%",s.text&&(M="15%")),"rotation"==s.effect&&s.text&&(M="75%"),o.css({transform:"scale("+k+") translateX("+M+")",whiteSpace:"nowrap"})}}function z(e){x.css({top:"auto",transform:"translateY("+e+"px) translateZ(0)"})}if(x.css({marginTop:-x.outerHeight()/2+"px"}),c.outerHeight()>e(window).height()){var S=e(window).scrollTop(),T=x.outerHeight(),C=c.offset().top,H=c.outerHeight(),A=S-C+e(window).height()/2;A<0&&(A=Math.abs(A)),A-T>=0&&A+T<=H?(C-S>e(window).height()/2&&(A=T),z(A)):z(A=S>C+H-T?S-C-T:S-C+T),e(document).scroll(function(){var t=e(window).scrollTop()-C+e(window).height()/2;t-T>=0&&t+T<=H&&z(t)})}return s.waitTime>0&&setTimeout(function(){b()},s.waitTime),g.on("destroyed",function(){s.onClose&&e.isFunction(s.onClose)&&s.onClose(c),g.trigger("close",{el:c})}),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},g},hide:function(){b()}};function b(){var t=c.attr("data-waitme_id");c.find("."+d+'[data-waitme_id="'+t+'"]').fadeOut(300,function(){c.removeClass(d+"_container").removeAttr("data-waitme_id"),e(this).remove()})}return w[t]?w[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:w.init.apply(this,arguments)})},e(window).on("load",function(){e("body.waitMe_body").addClass("hideMe"),setTimeout(function(){e("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove(),e("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})}(jQuery);